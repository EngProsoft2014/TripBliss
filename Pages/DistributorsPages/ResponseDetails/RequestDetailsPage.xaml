<?xml version="1.0" encoding="utf-8" ?>
<Controls:CustomControl xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="TripBliss.Pages.DistributorsPages.ResponseDetailes.RequestDetailsPage"
             xmlns:tabView="clr-namespace:Syncfusion.Maui.TabView;assembly=Syncfusion.Maui.TabView"
             xmlns:syncfusion="clr-namespace:Syncfusion.Maui.DataGrid;assembly=Syncfusion.Maui.DataGrid"
             xmlns:vm="clr-namespace:TripBliss.ViewModels.DistributorsViewModels.ResponseDetails"
             xmlns:Controls="clr-namespace:TripBliss.Controls"
             xmlns:res="clr-namespace:TripBliss.Resources.Language"
             BackgroundColor="White"
             IsEnabled="{Binding IsBusy}"
             NavigationPage.HasNavigationBar="False"
             Title="RequestDetailsPage">
    <Controls:CustomControl.Resources>
        <Style TargetType="syncfusion:DataGridCell">
            <Setter Property="FontSize" Value="14"/>
        </Style>
    </Controls:CustomControl.Resources>
    <StackLayout Orientation="Vertical">
        <tabView:SfTabView TabBarPlacement="Bottom" VerticalOptions="FillAndExpand" IndicatorBackground="#1c874b"
                               IndicatorPlacement="Top" TabBarHeight="55" FlowDirection="LeftToRight" SelectionChanged="SfTabView_SelectionChanged">
            <tabView:SfTabView.Items>
                <!--Request Details-->
                <tabView:SfTabItem Header="{Static res:AppResources.btnRequestDetails_RequestDetails}" FontSize="14" BackgroundColor="#f6fcf2"
                                   FontFamily="Almarai-Regular">
                    <tabView:SfTabItem.Content>
                        <ContentView x:Name="DetailsView" Margin="{OnPlatform Android=20, iOS='20,0,20,0'}">
                            <StackLayout Orientation="Vertical" Spacing="10">
                                <StackLayout Orientation="Horizontal">
                                    <Image VerticalOptions="CenterAndExpand">
                                        <Image.Source>
                                            <FontImageSource Glyph="" FontFamily="FontIconSolid" Color="Gray" Size="25"></FontImageSource>
                                        </Image.Source>
                                        <Image.Triggers>
                                            <DataTrigger TargetType="Image" Binding="{Binding Lang}" Value="ar">
                                                <Setter Property="Rotation" Value="180"></Setter>
                                            </DataTrigger>
                                        </Image.Triggers>
                                        <Image.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding BackButtonCommand}"></TapGestureRecognizer>
                                        </Image.GestureRecognizers>
                                    </Image>
                                    <Label Text="{Binding Response.RequestName}" FontAutoScalingEnabled="False" FontSize="18" FontAttributes="Bold" HorizontalOptions="CenterAndExpand"
                                           TextColor="Black" VerticalOptions="CenterAndExpand" ></Label>
                                    <Image VerticalOptions="End" IsVisible="False">
                                        <Image.Source>
                                            <FontImageSource Glyph="" FontFamily="FontIconSolid" Color="Gray" Size="25"></FontImageSource>
                                        </Image.Source>
                                        <Image.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding DeleteRequestCommand}"></TapGestureRecognizer>
                                        </Image.GestureRecognizers>
                                        <Image.Triggers>
                                            <DataTrigger TargetType="Image" Binding="{Binding Response.TotalPriceAgentAccept}" Value="0">
                                                <Setter Property="IsVisible" Value="True"></Setter>
                                            </DataTrigger>
                                        </Image.Triggers>
                                    </Image>
                                </StackLayout>
                                <ScrollView VerticalOptions="FillAndExpand" VerticalScrollBarVisibility="Never">
                                    <StackLayout Spacing="{OnPlatform Android=0, iOS=0}">
                                        <!--Hotel-->
                                        <StackLayout Spacing="0">
                                            <CarouselView ItemsSource="{Binding Response.ResponseWithDistributorHotel}" Margin="5,0" IndicatorView="indicatorView" HorizontalScrollBarVisibility="Never" HorizontalOptions="FillAndExpand" Loop="False" HeightRequest="{OnPlatform iOS=235}">
                                                <CarouselView.ItemTemplate>
                                                    <DataTemplate>

                                                        <StackLayout Orientation="Vertical" HorizontalOptions="FillAndExpand" Margin="0,10">
                                                            <Label Text="{Static res:AppResources.lblHotelServices}" FontAutoScalingEnabled="False" TextColor="DarkOrange" Margin="0,0,0,5" FontAttributes="Bold" FontSize="14">

                                                            </Label>
                                                            <StackLayout Spacing="10" HorizontalOptions="FillAndExpand">

                                                                <Border StrokeShape="RoundRectangle 8" StrokeThickness="1" Padding="0,0,0,10"
                                                                        HorizontalOptions="FillAndExpand">
                                                                    <StackLayout Orientation="Vertical" >
                                                                        <StackLayout Orientation="Horizontal">
                                                                            <Label VerticalTextAlignment="Center" Padding="5" FontAutoScalingEnabled="False">
                                                                                <Label.FormattedText>
                                                                                    <FormattedString>
                                                                                        <Span Text="{Binding RequestTravelAgencyHotel.LocationNameLang}" TextColor="Black" FontSize="12" FontAttributes="Bold"></Span>
                                                                                        <Span Text=" - " TextColor="Black" FontSize="12" FontAttributes="Bold"></Span>
                                                                                        <Span Text="{Binding RequestTravelAgencyHotel.HotelNameLang}" TextColor="Black" FontSize="12" FontAttributes="Bold"></Span>
                                                                                    </FormattedString>
                                                                                </Label.FormattedText>
                                                                            </Label>
                                                                            <Line StrokeThickness="1" Y1="0" Y2="40" Stroke="Gray" HorizontalOptions="EndAndExpand"></Line>
                                                                            <VerticalStackLayout Margin="10,0" VerticalOptions="CenterAndExpand">
                                                                                <Label Text="{Binding RequestTravelAgencyHotel.NumberOfNights}" FontAutoScalingEnabled="False" FontSize="11" TextColor="#387955" FontAttributes="Bold" HorizontalTextAlignment="Center"></Label>
                                                                                <Label Text="{Static res:AppResources.lblNights_RequestDetails}" FontAutoScalingEnabled="False" FontSize="11" TextColor="#387955"
                                                                                        FontAttributes="Bold"></Label>
                                                                            </VerticalStackLayout>
                                                                        </StackLayout>
                                                                        <BoxView HorizontalOptions="FillAndExpand" Color="Gray" HeightRequest=".5"></BoxView>
                                                                        <VerticalStackLayout>
                                                                            <StackLayout Orientation="Horizontal" Padding="5">
                                                                                <Label Text="{Static res:AppResources.lblCheckIn_HotelService}" FontAutoScalingEnabled="False" TextColor="Black" FontSize="12"
                                                                                        FontFamily="Almarai-Regular"></Label>
                                                                                <Label Text=": " TextColor="Black" FontSize="13" FontAutoScalingEnabled="False"></Label>
                                                                                <Label Text="{Binding RequestTravelAgencyHotel.CheckIn , StringFormat='{0:d}'}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12" VerticalTextAlignment="End"></Label>
                                                                                <Label Text="{Static res:AppResources.lblCheckOut_HotelService}" FontAutoScalingEnabled="False" TextColor="Black" FontSize="12"
                                                                                        FontFamily="Almarai-Regular" HorizontalOptions="EndAndExpand"></Label>
                                                                                <Label Text=": " TextColor="Black" FontSize="12" FontAutoScalingEnabled="False"></Label>
                                                                                <Label Text="{Binding RequestTravelAgencyHotel.CheckOut ,StringFormat='{0:d}'}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12" VerticalTextAlignment="End"></Label>
                                                                            </StackLayout>
                                                                            <Label Text="{Static res:AppResources.lblRoomDetails_RequestDetails}" FontAutoScalingEnabled="False" TextColor="#387955" FontSize="12"
                                                                                    FontAttributes="Bold" Margin="0,0" Padding="5"></Label>
                                                                            <Border StrokeShape="RoundRectangle 8" StrokeThickness="1" Padding="7" Margin="10,0">
                                                                                <VerticalStackLayout Spacing="3">
                                                                                    <StackLayout Orientation="Horizontal">

                                                                                        <Label Text="{Static res:AppResources.lblRoomType_HotelService}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                                FontAttributes="Bold"></Label>
                                                                                        <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                        <Label Text="{Binding RequestTravelAgencyHotel.RoomTypeNameLang}" TextColor="DarkOrange" FontAutoScalingEnabled="False" FontSize="11" FontAttributes="Bold"></Label>

                                                                                        <Label Text="{Static res:AppResources.lblView_RequestDetails}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                                FontAttributes="Bold" HorizontalOptions="EndAndExpand"></Label>
                                                                                        <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                        <Label Text="{Binding RequestTravelAgencyHotel.RoomViewNameLang}" FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="11" FontAttributes="Bold"></Label>
                                                                                    </StackLayout>
                                                                                    <StackLayout Orientation="Horizontal">
                                                                                        <Label Text="{Static res:AppResources.lblNoOfRoom_HotelService}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                                FontAttributes="Bold"></Label>
                                                                                        <Label Text=": " TextColor="Gray" FontAutoScalingEnabled="False" FontSize="12" FontAttributes="Bold"></Label>
                                                                                        <Label Text="{Binding RequestTravelAgencyHotel.RoomCount}" FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="11" FontAttributes="Bold"></Label>
                                                                                        <Label Text="{Static res:AppResources.lblMeals_HotelService}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                                HorizontalOptions="EndAndExpand" FontAttributes="Bold"></Label>
                                                                                        <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                        <Label Text="{Binding RequestTravelAgencyHotel.MealNameLang}" FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="11" FontAttributes="Bold"></Label>
                                                                                    </StackLayout>
                                                                                </VerticalStackLayout>
                                                                            </Border>
                                                                        </VerticalStackLayout>
                                                                    </StackLayout>
                                                                </Border>
                                                            </StackLayout>
                                                        </StackLayout>
                                                    </DataTemplate>
                                                </CarouselView.ItemTemplate>

                                            </CarouselView>
                                            <IndicatorView x:Name="indicatorView"
                                                          IndicatorColor="LightGray"
                                                          SelectedIndicatorColor="#2fb569"
                                                          HorizontalOptions="Center" 
                                                          />
                                            <StackLayout.Triggers>
                                                <DataTrigger TargetType="StackLayout" Binding="{Binding Response.ResponseWithDistributorHotel.Count}" Value="0">
                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                    <Setter Property="HeightRequest" Value="0"></Setter>
                                                </DataTrigger>
                                            </StackLayout.Triggers>
                                        </StackLayout>
                                        <!--Transportation-->
                                        <StackLayout Spacing="0">
                                            <CarouselView ItemsSource="{Binding Response.ResponseWithDistributorTransport}" IndicatorView="TransportIndicatorView" HorizontalScrollBarVisibility="Never" HorizontalOptions="FillAndExpand" Loop="False" HeightRequest="{OnPlatform iOS=235}">
                                                <CarouselView.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackLayout Orientation="Vertical" HorizontalOptions="FillAndExpand" Margin="0,10">
                                                            <Label Text="{Static res:AppResources.lblTransportationServices}" FontAutoScalingEnabled="False" TextColor="DarkOrange" Margin="0,0,0,5" FontAttributes="Bold" FontSize="14"></Label>
                                                            <Border StrokeShape="RoundRectangle 8" StrokeThickness="1" Padding="0,0,0,10"
                                                                    HorizontalOptions="FillAndExpand">
                                                                <StackLayout Orientation="Vertical" >
                                                                    <StackLayout Orientation="Horizontal">
                                                                        <Label VerticalTextAlignment="Center" Padding="5" FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyTransport.FromLocation}" TextColor="Black" FontSize="12" FontAttributes="Bold"></Span>
                                                                                    <Span Text=" - " TextColor="Black" FontSize="12" FontAttributes="Bold"></Span>
                                                                                    <Span Text="{Binding RequestTravelAgencyTransport.ToLocation}" TextColor="Black" FontSize="12" FontAttributes="Bold"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>
                                                                        <Line StrokeThickness="1" Y1="0" Y2="40" Stroke="Gray" HorizontalOptions="EndAndExpand"></Line>
                                                                        <VerticalStackLayout Margin="10,0" VerticalOptions="CenterAndExpand">
                                                                            <Label Text="{Binding RequestTravelAgencyTransport.TransportCount}" FontAutoScalingEnabled="False" FontSize="11" TextColor="#387955" FontAttributes="Bold" HorizontalTextAlignment="Center"></Label>
                                                                            <Label Text="{Static res:AppResources.lblcars_RequestDetails}" FontAutoScalingEnabled="False" FontSize="11" TextColor="#387955"
                                                                                   FontAttributes="Bold"></Label>
                                                                        </VerticalStackLayout>
                                                                    </StackLayout>
                                                                    <BoxView HorizontalOptions="FillAndExpand" Color="Gray" HeightRequest=".5"></BoxView>
                                                                    <VerticalStackLayout>
                                                                        <StackLayout Orientation="Horizontal" Padding="5">
                                                                            <Label Text="{Static res:AppResources.lblDate_TranService}" FontAutoScalingEnabled="False" TextColor="Black" FontSize="12"
                                                                                    FontFamily="Almarai-Regular"></Label>
                                                                            <Label Text=": " TextColor="Black" FontSize="12" FontAutoScalingEnabled="False"></Label>
                                                                            <Label Text="{Binding RequestTravelAgencyTransport.Date , StringFormat='{0:d}'}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12" VerticalTextAlignment="End"></Label>
                                                                            <Label Text="{Static res:AppResources.lblTime_TranService}" FontAutoScalingEnabled="False" TextColor="Black" FontSize="12"
                                                                                    FontFamily="Almarai-Regular" HorizontalOptions="EndAndExpand"></Label>
                                                                            <Label Text=": " TextColor="Black" FontSize="12" FontAutoScalingEnabled="False"></Label>
                                                                            <Label FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12" VerticalTextAlignment="End">
                                                                                <Label.Text>
                                                                                    <MultiBinding StringFormat="{}{0:00}:{1:00;00}">
                                                                                        <Binding Path="RequestTravelAgencyTransport.Time.Hours"/>
                                                                                        <Binding Path="RequestTravelAgencyTransport.Time.Minutes"/>
                                                                                    </MultiBinding>
                                                                                </Label.Text>
                                                                            </Label>
                                                                        </StackLayout>
                                                                        <Label Text="{Static res:AppResources.lblTransportDetails_RequestDetails}" FontAutoScalingEnabled="False" TextColor="#387955" FontSize="12"
                                                                               FontAttributes="Bold" Margin="0,0" Padding="5"></Label>
                                                                        <Border StrokeShape="RoundRectangle 8" StrokeThickness="1" Padding="7" Margin="10,0">
                                                                            <VerticalStackLayout Spacing="3">
                                                                                <StackLayout Orientation="Horizontal">

                                                                                    <Label Text="{Static res:AppResources.lblBrand_TranServices}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                           FontAttributes="Bold"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                    <Label Text="{Binding RequestTravelAgencyTransport.BrandNameLang}" TextColor="DarkOrange" FontAutoScalingEnabled="False" FontSize="11" FontAttributes="Bold"></Label>

                                                                                    <Label Text="{Static res:AppResources.lblTypeName_RequestDetails}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                           FontAttributes="Bold" HorizontalOptions="EndAndExpand"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                    <Label Text="{Binding RequestTravelAgencyTransport.TypeNameLang}" FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="11" FontAttributes="Bold"></Label>
                                                                                </StackLayout>
                                                                                <StackLayout Orientation="Horizontal">
                                                                                    <Label Text="{Static res:AppResources.lblModel_TranService}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                            FontAttributes="Bold"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontAutoScalingEnabled="False" FontSize="12" FontAttributes="Bold"></Label>
                                                                                    <Label Text="{Binding RequestTravelAgencyTransport.ModelNameLang}" FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="11" FontAttributes="Bold"></Label>
                                                                                    <!--<Label Text="{Static res:AppResources.lblIsDriver_RequestDetails}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="14"
                                                                                            HorizontalOptions="EndAndExpand" FontAttributes="Bold"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontSize="14" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                    <Label Text="{Binding RequestTravelAgencyTransport.IsDriver}" FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="14" FontAttributes="Bold"></Label>-->
                                                                                </StackLayout>
                                                                            </VerticalStackLayout>
                                                                        </Border>
                                                                    </VerticalStackLayout>
                                                                </StackLayout>
                                                            </Border>
                                                        </StackLayout>
                                                    </DataTemplate>
                                                </CarouselView.ItemTemplate>
                                            </CarouselView>
                                            <IndicatorView x:Name="TransportIndicatorView"
                                                           IndicatorColor="LightGray"
                                                           SelectedIndicatorColor="#2fb569"
                                                           HorizontalOptions="Center" 
                                                           />
                                            <StackLayout.Triggers>
                                                <DataTrigger TargetType="StackLayout" Binding="{Binding Response.ResponseWithDistributorTransport.Count}" Value="0">
                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                    <Setter Property="HeightRequest" Value="0"></Setter>
                                                </DataTrigger>
                                            </StackLayout.Triggers>

                                        </StackLayout>
                                        <!--AirFlight-->
                                        <StackLayout Spacing="0">
                                            <CarouselView ItemsSource="{Binding Response.ResponseWithDistributorAirFlight}" IndicatorView="AirFlightIndicatorView" HorizontalScrollBarVisibility="Never" HorizontalOptions="FillAndExpand" Loop="False" HeightRequest="{OnPlatform iOS=290}">
                                                <CarouselView.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackLayout Orientation="Vertical" HorizontalOptions="FillAndExpand" Margin="0,10">
                                                            <Label Text="{Static res:AppResources.lblAirFlightServices}" TextColor="DarkOrange" FontAutoScalingEnabled="False" Margin="0,0,0,5" FontAttributes="Bold" FontSize="14"></Label>
                                                            <Border StrokeShape="RoundRectangle 8" StrokeThickness="1" Padding="0,0,0,10"
                                                                    HorizontalOptions="FillAndExpand">
                                                                <StackLayout Orientation="Vertical" >
                                                                    <StackLayout Orientation="Horizontal">
                                                                        <Label VerticalTextAlignment="Center" Padding="5" FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyAirFlight.AirportFrom}" TextColor="Black" FontSize="12" FontAttributes="Bold"></Span>
                                                                                    <Span Text=" - " TextColor="Black" FontSize="12" FontAttributes="Bold"></Span>
                                                                                    <Span Text="{Binding RequestTravelAgencyAirFlight.AirportTo}" TextColor="Black" FontSize="12" FontAttributes="Bold"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>
                                                                        <Line StrokeThickness="1" Y1="0" Y2="40" Stroke="Gray" HorizontalOptions="EndAndExpand"></Line>
                                                                        <VerticalStackLayout Margin="10,0" VerticalOptions="CenterAndExpand">
                                                                            <Label Text="{Binding RequestTravelAgencyAirFlight.TotalPerson}" FontAutoScalingEnabled="False" FontSize="11" TextColor="#387955" FontAttributes="Bold" HorizontalTextAlignment="Center"></Label>
                                                                            <Label Text="{Static res:AppResources.lblpersons_RequestDetails}" FontAutoScalingEnabled="False" FontSize="11" TextColor="#387955"
                                                                                    FontAttributes="Bold"></Label>
                                                                        </VerticalStackLayout>
                                                                    </StackLayout>
                                                                    <BoxView HorizontalOptions="FillAndExpand" Color="Gray" HeightRequest=".5"></BoxView>
                                                                    <VerticalStackLayout>
                                                                        <StackLayout Orientation="Horizontal" Padding="5">
                                                                            <Label Text="{Static res:AppResources.lblDate_TranService}" FontAutoScalingEnabled="False" TextColor="Black" FontSize="12"
                                                                                   FontFamily="Almarai-Regular"></Label>
                                                                            <Label Text=": " TextColor="Black" FontSize="12" FontAutoScalingEnabled="False"></Label>
                                                                            <Label Text="{Binding RequestTravelAgencyAirFlight.Date , StringFormat='{0:d}'}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12" VerticalTextAlignment="End"></Label>
                                                                        </StackLayout>
                                                                        <Label Text="{Static res:AppResources.lblAirFlightDetails_RequestDetails}" FontAutoScalingEnabled="False" TextColor="#387955" FontSize="14"
                                                                                FontAttributes="Bold" Margin="0,0" Padding="5"></Label>
                                                                        <Border StrokeShape="RoundRectangle 8" StrokeThickness="1" Padding="7" Margin="10,0">
                                                                            <VerticalStackLayout Spacing="3">
                                                                                <StackLayout Orientation="Horizontal">

                                                                                    <Label Text="{Static res:AppResources.lblCarrier_AirService}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                           FontAttributes="Bold"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                    <Label Text="{Binding RequestTravelAgencyAirFlight.AirLineLang}" TextColor="DarkOrange" FontAutoScalingEnabled="False" FontSize="11" FontAttributes="Bold"></Label>

                                                                                    <Label Text="{Static res:AppResources.lblClass_AirService}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                            FontAttributes="Bold" HorizontalOptions="EndAndExpand"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                    <Label Text="{Binding RequestTravelAgencyAirFlight.ClassNameLang}" FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="11" FontAttributes="Bold"></Label>
                                                                                </StackLayout>
                                                                                <StackLayout Orientation="Horizontal">
                                                                                    <Label Text="ETD" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                            FontAttributes="Bold"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontAutoScalingEnabled="False" FontSize="12" FontAttributes="Bold"></Label>
                                                                                    <Label FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="11" FontAttributes="Bold">
                                                                                        <Label.Text>
                                                                                            <MultiBinding StringFormat="{}{0:00}:{1:00;00}">
                                                                                                <Binding Path="RequestTravelAgencyAirFlight.ETD.Hours"/>
                                                                                                <Binding Path="RequestTravelAgencyAirFlight.ETD.Minutes"/>
                                                                                            </MultiBinding>
                                                                                        </Label.Text>
                                                                                    </Label>
                                                                                    <Label Text="ETA" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                            HorizontalOptions="EndAndExpand" FontAttributes="Bold"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                    <Label FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="11" FontAttributes="Bold">
                                                                                        <Label.Text>
                                                                                            <MultiBinding StringFormat="{}{0:00}:{1:00;00}">
                                                                                                <Binding Path="RequestTravelAgencyAirFlight.ETA.Hours"/>
                                                                                                <Binding Path="RequestTravelAgencyAirFlight.ETA.Minutes"/>
                                                                                            </MultiBinding>
                                                                                        </Label.Text>
                                                                                    </Label>
                                                                                </StackLayout>
                                                                                <StackLayout Orientation="Horizontal">

                                                                                    <Label Text="{Static res:AppResources.lblAdult_AirService}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                            FontAttributes="Bold"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                    <Label Text="{Binding RequestTravelAgencyAirFlight.InfoAdultCount}" TextColor="DarkOrange" FontAutoScalingEnabled="False" FontSize="11" FontAttributes="Bold"></Label>

                                                                                    <Label Text="{Static res:AppResources.lblChild_AirService}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                            FontAttributes="Bold" HorizontalOptions="EndAndExpand"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                    <Label Text="{Binding RequestTravelAgencyAirFlight.InfoChildCount}" FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="11" FontAttributes="Bold"></Label>
                                                                                </StackLayout>
                                                                                <StackLayout Orientation="Horizontal">

                                                                                    <Label Text="{Static res:AppResources.lblInfant_AirService}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12"
                                                                                           FontAttributes="Bold"></Label>
                                                                                    <Label Text=": " TextColor="Gray" FontSize="12" FontAutoScalingEnabled="False" FontAttributes="Bold"></Label>
                                                                                    <Label Text="{Binding RequestTravelAgencyAirFlight.InfoInfantCount}" TextColor="DarkOrange" FontAutoScalingEnabled="False" FontSize="11" FontAttributes="Bold"></Label>
                                                                                </StackLayout>
                                                                            </VerticalStackLayout>
                                                                        </Border>
                                                                    </VerticalStackLayout>
                                                                </StackLayout>
                                                            </Border>
                                                        </StackLayout>
                                                    </DataTemplate>
                                                </CarouselView.ItemTemplate>
                                            </CarouselView>
                                            <IndicatorView x:Name="AirFlightIndicatorView"
                                                           IndicatorColor="LightGray"
                                                           SelectedIndicatorColor="#2fb569"
                                                           HorizontalOptions="Center" 
                                                           />
                                            <StackLayout.Triggers>
                                                <DataTrigger TargetType="StackLayout" Binding="{Binding Response.ResponseWithDistributorAirFlight.Count}" Value="0">
                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                    <Setter Property="HeightRequest" Value="0"></Setter>
                                                </DataTrigger>
                                            </StackLayout.Triggers>
                                        </StackLayout>
                                        <!--Visa-->
                                        <StackLayout Spacing="0">
                                            <CarouselView ItemsSource="{Binding Response.ResponseWithDistributorVisa}" IndicatorView="VisaIndicatorView" HorizontalScrollBarVisibility="Never" HorizontalOptions="FillAndExpand" Loop="False" HeightRequest="{OnPlatform iOS=150}">
                                                <CarouselView.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackLayout Orientation="Vertical" HorizontalOptions="FillAndExpand" Margin="0,10">
                                                            <Label Text="{Static res:AppResources.lblVisaServices}" TextColor="DarkOrange" Margin="0,0,0,5" FontAttributes="Bold" FontSize="14"></Label>
                                                            <Border StrokeShape="RoundRectangle 8" StrokeThickness="1" Padding="0,0,0,0"
                                                                    HorizontalOptions="FillAndExpand">
                                                                <StackLayout Orientation="Vertical" VerticalOptions="CenterAndExpand">
                                                                    <StackLayout Orientation="Horizontal" Margin="10,0">
                                                                        <Label Text="{Static res:AppResources.lblVisaType_VisaService}" FontAutoScalingEnabled="False" TextColor="Black" FontSize="12" FontAttributes="Bold" VerticalTextAlignment="Center"
                                                                               FontFamily="Almarai-Regular"></Label>
                                                                        <Label Text=": " TextColor="Black" FontSize="13" FontAutoScalingEnabled="False" VerticalOptions="Center"></Label>
                                                                        <Label Text="{Binding RequestTravelAgencyVisa.VisaNameLang}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12" VerticalTextAlignment="Center"></Label>
                                                                        <Line StrokeThickness="1" Y1="0" Y2="40" Stroke="Gray" HorizontalOptions="EndAndExpand" VerticalOptions="FillAndExpand"></Line>
                                                                        <VerticalStackLayout Margin="10,0" VerticalOptions="CenterAndExpand">
                                                                            <Label Text="{Binding RequestTravelAgencyVisa.PersonCount}" FontAutoScalingEnabled="False" FontSize="11" TextColor="#387955" FontAttributes="Bold" HorizontalTextAlignment="Center"></Label>
                                                                            <Label Text="{Static res:AppResources.lblpersons_RequestDetails}" FontAutoScalingEnabled="False" FontSize="11" TextColor="#387955"
                                                                                   FontAttributes="Bold"></Label>
                                                                        </VerticalStackLayout>
                                                                    </StackLayout>
                                                                    <BoxView HorizontalOptions="FillAndExpand" Color="Gray" HeightRequest=".5"></BoxView>
                                                                    <StackLayout Orientation="Horizontal" Margin="10,7">
                                                                        <Label Text="{Static res:AppResources.Max_delivery_date}" FontAutoScalingEnabled="False" TextColor="Gray" FontSize="12" FontAttributes="Bold" VerticalTextAlignment="Center"
                                                                               FontFamily="Almarai-Regular"></Label>
                                                                        <Label Text=": " TextColor="Black" VerticalTextAlignment="Center" FontSize="12" FontAutoScalingEnabled="False"></Label>
                                                                        <Label Text="{Binding RequestTravelAgencyVisa.DateVisa,StringFormat='{0:d}'}" FontAutoScalingEnabled="False" TextColor="DarkOrange" FontSize="12" VerticalTextAlignment="Center"></Label>
                                                                    </StackLayout>
                                                                </StackLayout>
                                                            </Border>
                                                        </StackLayout>
                                                    </DataTemplate>
                                                </CarouselView.ItemTemplate>
                                            </CarouselView>
                                            <IndicatorView x:Name="VisaIndicatorView"
                                                           IndicatorColor="LightGray"
                                                           SelectedIndicatorColor="#2fb569"
                                                           HorizontalOptions="Center" 
                                                           />
                                            <StackLayout.Triggers>
                                                <DataTrigger TargetType="StackLayout" Binding="{Binding Response.ResponseWithDistributorVisa.Count}" Value="0">
                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                    <Setter Property="HeightRequest" Value="0"></Setter>
                                                </DataTrigger>
                                            </StackLayout.Triggers>
                                        </StackLayout>
                                    </StackLayout>
                                </ScrollView>
                            </StackLayout>
                            <ContentView.Triggers>
                                <DataTrigger TargetType="ContentView" Binding="{Binding Lang}" Value="ar">
                                    <Setter Property="FlowDirection" Value="RightToLeft"></Setter>
                                </DataTrigger>
                            </ContentView.Triggers>
                        </ContentView>
                    </tabView:SfTabItem.Content>
                </tabView:SfTabItem>
                <!--Response-->
                <tabView:SfTabItem Header="{Static res:AppResources.btnResponse_RequestDetails}" FontSize="14" BackgroundColor="#f6fcf2"
                                   FontFamily="Almarai-Regular">
                    <tabView:SfTabItem.Content>
                        <ContentView x:Name="ResponseView">
                            <!--<ContentView.BindingContext>
                                <vm:RequestDetailsViewModel></vm:RequestDetailsViewModel>
                            </ContentView.BindingContext>-->
                            <ContentView.Resources>
                                <Style TargetType="StackLayout">
                                    <Setter Property="VisualStateManager.VisualStateGroups">
                                        <VisualStateGroupList>
                                            <VisualStateGroup Name="CommonStates">
                                                <VisualState Name="Normal"></VisualState>
                                                <VisualState Name="Selected">
                                                    <VisualState.Setters>
                                                        <Setter Property="BackgroundColor" Value="Transparent"></Setter>
                                                    </VisualState.Setters>
                                                </VisualState>

                                            </VisualStateGroup>
                                        </VisualStateGroupList>
                                    </Setter>
                                </Style>
                            </ContentView.Resources>
                            <StackLayout Orientation="Vertical" Margin="{OnPlatform Android=20, iOS='20,0,20,0'}" Spacing="10">
                                <StackLayout Orientation="Horizontal">
                                    <Image VerticalOptions="CenterAndExpand">
                                        <Image.Source>
                                            <FontImageSource Glyph="" FontFamily="FontIconSolid" Color="Gray" Size="25"></FontImageSource>
                                        </Image.Source>
                                        <Image.Triggers>
                                            <DataTrigger TargetType="Image" Binding="{Binding Lang}" Value="ar">
                                                <Setter Property="Rotation" Value="180"></Setter>
                                            </DataTrigger>
                                        </Image.Triggers>
                                        <Image.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding BackButtonCommand}"></TapGestureRecognizer>
                                        </Image.GestureRecognizers>
                                    </Image>
                                    <Label Text="{Binding Response.RequestName}" FontSize="18" FontAttributes="Bold" HorizontalOptions="CenterAndExpand"
                                           TextColor="Black" VerticalOptions="CenterAndExpand" ></Label>

                                    <Button Text="{Static res:AppResources.lblReviews}" IsVisible="{Binding IsShowReviewBtn}" FontAutoScalingEnabled="False" Padding="0,5,0,5" HeightRequest="35" FontSize="{OnPlatform Android=12,iOS=14}"
                                            Command="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=ReviewClickedCommand}"
                                            BackgroundColor="#ff7700" CornerRadius="5" TextColor="White" WidthRequest="70" Margin="0,0,0,0" FontAttributes="Bold">
                                        <Button.Triggers>
                                            <DataTrigger TargetType="Button" Binding="{Binding IsRequestHistory}" Value="True">
                                                <Setter Property="IsVisible" Value="False"></Setter>
                                            </DataTrigger>
                                        </Button.Triggers>
                                    </Button>

                                </StackLayout>
                                <ScrollView VerticalOptions="FillAndExpand" VerticalScrollBarVisibility="Never" Padding="0,10">
                                    <StackLayout>
                                        <!--Hotel-->
                                        <StackLayout Orientation="Horizontal" Margin="{OnPlatform Android='0,15,0,5', iOS='0,5,0,5'}">
                                            <Label Text="{Static res:AppResources.lblHotelServices}" FontSize="14" TextColor="DarkOrange" VerticalTextAlignment="Center"></Label>
                                        </StackLayout>
                                        <Border StrokeShape="RoundRectangle 5" HorizontalOptions="FillAndExpand" Margin="0,0,0,15">
                                            <CollectionView ItemsSource="{Binding Response.ResponseWithDistributorHotel}" VerticalOptions="FillAndExpand">
                                                <CollectionView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border>
                                                            <Grid HorizontalOptions="FillAndExpand">
                                                                <ScrollView Orientation="Horizontal" HorizontalOptions="FillAndExpand" HorizontalScrollBarVisibility="Never" Padding="3,0,33,0">
                                                                    <StackLayout Orientation="Horizontal" Spacing="20" Padding="3" Margin="0,5" VerticalOptions="Center" HorizontalOptions="FillAndExpand">
                                                                        <Label VerticalTextAlignment="Center" FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyHotel.LocationNameLang}" TextColor="Gray" FontSize="12"></Span>
                                                                                    <Span Text=" - " TextColor="Gray" FontSize="14"></Span>
                                                                                    <Span Text="{Binding RequestTravelAgencyHotel.HotelNameLang}" TextColor="Gray" FontSize="12"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>
                                                                        <Label VerticalTextAlignment="Center" FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyHotel.CheckIn, StringFormat='{0:MM-dd-yyyy}'}" TextColor="Gray" FontSize="12"></Span>
                                                                                    <Span Text=" - " TextColor="Gray" FontSize="14"></Span>
                                                                                    <Span Text="{Binding RequestTravelAgencyHotel.CheckOut , StringFormat='{0:MM-dd-yyyy}'}" TextColor="Gray" FontSize="12"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>
                                                                        <Label Text="{Binding Total,StringFormat='SAR {0}'}" TextColor="DeepSkyBlue" 
                                                                                VerticalOptions="EndAndExpand" FontSize="11">
                                                                            <Label.Triggers>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Total}" Value="0">
                                                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                                                </DataTrigger>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=Lang}" Value="ar">
                                                                                    <Setter Property="Text" Value="{Binding Total,StringFormat='{0} رس'}"></Setter>
                                                                                </DataTrigger>
                                                                            </Label.Triggers>
                                                                        </Label>
                                                                        <StackLayout.GestureRecognizers>
                                                                            <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=SelectHotelCommand}" CommandParameter="{Binding}"></TapGestureRecognizer>
                                                                        </StackLayout.GestureRecognizers>
                                                                    </StackLayout>
                                                                </ScrollView>
                                                            </Grid>
                                                            <Border.Triggers>
                                                                <DataTrigger TargetType="Border" Binding="{Binding AcceptPriceDis}" Value="True">
                                                                    <Setter Property="Stroke" Value="Green"></Setter>
                                                                    <Setter Property="StrokeThickness" Value="2"></Setter>
                                                                </DataTrigger>
                                                                <DataTrigger TargetType="Border" Binding="{Binding AcceptAgen}" Value="True">
                                                                    <Setter Property="Stroke" Value="DodgerBlue"></Setter>
                                                                    <Setter Property="StrokeThickness" Value="2"></Setter>
                                                                </DataTrigger>
                                                            </Border.Triggers>
                                                        </Border>


                                                    </DataTemplate>
                                                </CollectionView.ItemTemplate>
                                            </CollectionView>
                                        </Border>

                                        <!--Transportaion-->
                                        <StackLayout Orientation="Horizontal" Margin="0,0,0,5">
                                            <Label Text="{Static res:AppResources.lblTransportationServices}" FontSize="14" TextColor="DarkOrange" FontAttributes="None" VerticalTextAlignment="Center"></Label>
                                        </StackLayout>
                                        <Border StrokeShape="RoundRectangle 5" HorizontalOptions="FillAndExpand" Margin="0,0,0,15">
                                            <CollectionView ItemsSource="{Binding Response.ResponseWithDistributorTransport}" VerticalOptions="FillAndExpand" SelectionMode="Single">
                                                <CollectionView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border>
                                                            <Grid HorizontalOptions="FillAndExpand">
                                                                <ScrollView Orientation="Horizontal" Padding="3,0,33,0" HorizontalScrollBarVisibility="Never">
                                                                    <StackLayout Orientation="Horizontal" Spacing="10" Padding="3" Margin="0,5" VerticalOptions="Center">
                                                                        <Label Text="{Binding RequestTravelAgencyTransport.TypeNameLang}" FontAutoScalingEnabled="False" TextColor="#2fa562" FontSize="12" FontAttributes="Bold" VerticalTextAlignment="Center"></Label>
                                                                        <Label TextColor="Gray" FontAutoScalingEnabled="False" FontSize="12" VerticalTextAlignment="Center">
                                                                            <Label.Text>
                                                                                <MultiBinding StringFormat="{}{0} - {1}">
                                                                                    <Binding Path="RequestTravelAgencyTransport.FromLocation" />
                                                                                    <Binding Path="RequestTravelAgencyTransport.ToLocation" />
                                                                                </MultiBinding>
                                                                            </Label.Text>

                                                                        </Label>
                                                                        <!--<Label VerticalTextAlignment="Center" FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyTransport.TransportCount,StringFormat='{0} pax'}" TextColor="Gray" FontSize="12"></Span>
                                                                                    <Span Text="{Binding RequestTravelAgencyTransport.Date, StringFormat='   {0:MM-dd-yyyy}'}" TextColor="Gray" FontSize="12"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>-->
                                                                        <Label Text="{Binding RequestTravelAgencyTransport.Date, StringFormat='  {0:MM-dd-yyyy}'}" TextColor="Gray" FontSize="12" VerticalTextAlignment="Center" FontAutoScalingEnabled="False">

                                                                        </Label>

                                                                        <Label Text="{Binding RequestTravelAgencyTransport.TransportCount,StringFormat='{0} car'}" TextColor="Gray" FontSize="12" VerticalTextAlignment="Center" FontAutoScalingEnabled="False">
                                                                            <Label.Triggers>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=Lang}" Value="ar">
                                                                                    <Setter Property="Text" Value="{Binding RequestTravelAgencyTransport.TransportCount,StringFormat='{0} سيارة'}"></Setter>
                                                                                </DataTrigger>
                                                                            </Label.Triggers>
                                                                        </Label>



                                                                        <Label Text="{Binding Total,StringFormat='SAR {0}'}" TextColor="DeepSkyBlue"
                                                                           VerticalOptions="EndAndExpand" FontSize="11">
                                                                            <Label.Triggers>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Total}" Value="0">
                                                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                                                </DataTrigger>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=Lang}" Value="ar">
                                                                                    <Setter Property="Text" Value="{Binding Total,StringFormat='{0} رس'}"></Setter>
                                                                                </DataTrigger>
                                                                            </Label.Triggers>
                                                                        </Label>
                                                                        <StackLayout.GestureRecognizers>
                                                                            <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=SelectTransportaionCommand}" CommandParameter="{Binding}"></TapGestureRecognizer>
                                                                        </StackLayout.GestureRecognizers>

                                                                    </StackLayout>
                                                                </ScrollView>
                                                            </Grid>

                                                            <Border.Triggers>
                                                                <DataTrigger TargetType="Border" Binding="{Binding AcceptPriceDis}" Value="True">
                                                                    <Setter Property="Stroke" Value="Green"></Setter>
                                                                    <Setter Property="StrokeThickness" Value="2"></Setter>
                                                                </DataTrigger>
                                                                <DataTrigger TargetType="Border" Binding="{Binding AcceptAgen}" Value="True">
                                                                    <Setter Property="Stroke" Value="DodgerBlue"></Setter>
                                                                    <Setter Property="StrokeThickness" Value="2"></Setter>
                                                                </DataTrigger>
                                                            </Border.Triggers>
                                                        </Border>
                                                    </DataTemplate>
                                                </CollectionView.ItemTemplate>
                                            </CollectionView>
                                        </Border>

                                        <!--Air Flight-->
                                        <StackLayout Orientation="Horizontal" Margin="0,0,0,5">
                                            <Label Text="{Static res:AppResources.lblAirFlightServices}" FontSize="14" TextColor="DarkOrange" FontAttributes="None" VerticalTextAlignment="Center"></Label>
                                        </StackLayout>
                                        <Border StrokeShape="RoundRectangle 5" HorizontalOptions="FillAndExpand" Margin="0,0,0,15">
                                            <CollectionView ItemsSource="{Binding Response.ResponseWithDistributorAirFlight}" VerticalOptions="FillAndExpand"  SelectionMode="Single">
                                                <CollectionView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border>
                                                            <Grid HorizontalOptions="FillAndExpand">
                                                                <ScrollView Orientation="Horizontal" Padding="3,0,33,0" HorizontalScrollBarVisibility="Never">
                                                                    <StackLayout Orientation="Horizontal" Spacing="20" Padding="3" Margin="0,5" VerticalOptions="Center" HorizontalOptions="FillAndExpand">
                                                                        <Label VerticalTextAlignment="Center" FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyAirFlight.AirLineLang}" TextColor="#2fa562" FontSize="12" FontAttributes="Bold"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>
                                                                        <Label VerticalTextAlignment="Center" FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyAirFlight.AirportFrom}" TextColor="Gray" FontSize="12" ></Span>
                                                                                    <Span Text=" - " TextColor="Gray" FontSize="14"></Span>
                                                                                    <Span Text="{Binding RequestTravelAgencyAirFlight.AirportTo}" TextColor="Gray" FontSize="12"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>
                                                                        <!--<Label VerticalTextAlignment="Center" FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyAirFlight.TotalPerson,StringFormat='{0} pax'}" TextColor="Gray" FontSize="12"></Span>
                                                                                    <Span Text="{Binding RequestTravelAgencyAirFlight.Date , StringFormat='    {0:MM-dd-yyyy}'}" TextColor="Gray" FontSize="12"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>-->

                                                                        <Label Text="{Binding RequestTravelAgencyAirFlight.Date, StringFormat='  {0:MM-dd-yyyy}'}" TextColor="Gray" FontSize="12" VerticalTextAlignment="Center" FontAutoScalingEnabled="False">

                                                                        </Label>

                                                                        <Label Text="{Binding RequestTravelAgencyAirFlight.TotalPerson,StringFormat='{0} pax'}" TextColor="Gray" FontSize="12" VerticalTextAlignment="Center" FontAutoScalingEnabled="False">
                                                                            <Label.Triggers>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=Lang}" Value="ar">
                                                                                    <Setter Property="Text" Value="{Binding RequestTravelAgencyAirFlight.TotalPerson,StringFormat='{0} شخص'}"></Setter>
                                                                                </DataTrigger>
                                                                            </Label.Triggers>
                                                                        </Label>


                                                                        <Label Text="{Binding Total,StringFormat='SAR {0}'}" TextColor="DeepSkyBlue"
                                                                                 VerticalOptions="EndAndExpand" FontSize="11">
                                                                            <Label.Triggers>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Total}" Value="0">
                                                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                                                </DataTrigger>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=Lang}" Value="ar">
                                                                                    <Setter Property="Text" Value="{Binding Total,StringFormat='{0} رس'}"></Setter>
                                                                                </DataTrigger>
                                                                            </Label.Triggers>
                                                                        </Label>
                                                                        <StackLayout.GestureRecognizers>
                                                                            <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=SelectAirFlightCommand}" CommandParameter="{Binding}"></TapGestureRecognizer>
                                                                        </StackLayout.GestureRecognizers>
                                                                    </StackLayout>

                                                                </ScrollView>
                                                            </Grid>
                                                            <Border.Triggers>
                                                                <DataTrigger TargetType="Border" Binding="{Binding AcceptPriceDis}" Value="True">
                                                                    <Setter Property="Stroke" Value="Green"></Setter>
                                                                    <Setter Property="StrokeThickness" Value="2"></Setter>
                                                                </DataTrigger>
                                                                <DataTrigger TargetType="Border" Binding="{Binding AcceptAgen}" Value="True">
                                                                    <Setter Property="Stroke" Value="DodgerBlue"></Setter>
                                                                    <Setter Property="StrokeThickness" Value="2"></Setter>
                                                                </DataTrigger>
                                                            </Border.Triggers>
                                                        </Border>
                                                    </DataTemplate>
                                                </CollectionView.ItemTemplate>
                                            </CollectionView>
                                        </Border>

                                        <!--Visa-->
                                        <StackLayout Orientation="Horizontal" Margin="0,0,0,5">
                                            <Label Text="{Static res:AppResources.lblVisaServices}" FontSize="14" TextColor="DarkOrange" FontAttributes="None" VerticalTextAlignment="Center"></Label>
                                        </StackLayout>
                                        <Border StrokeShape="RoundRectangle 5" HorizontalOptions="FillAndExpand" Margin="0,0,0,15">
                                            <CollectionView ItemsSource="{Binding Response.ResponseWithDistributorVisa}" VerticalOptions="FillAndExpand" SelectionMode="Single">
                                                <CollectionView.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border>
                                                            <Grid HorizontalOptions="FillAndExpand">
                                                                <ScrollView  Orientation="Horizontal" Padding="3,0,33,0" HorizontalScrollBarVisibility="Never">
                                                                    <StackLayout Orientation="Horizontal" Spacing="20" Padding="3" Margin="0,5" VerticalOptions="Center" HorizontalOptions="FillAndExpand">
                                                                        <Label FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="#" TextColor="#2fa562" FontSize="12" FontAttributes="Bold"></Span>
                                                                                    <Span Text="{Binding RequestTravelAgencyVisa.VisaId}" TextColor="#2fa562" FontSize="12"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>
                                                                        <Label FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyVisa.VisaNameLang}" TextColor="Gray" FontSize="12"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>
                                                                        <!--<Label FontAutoScalingEnabled="False">
                                                                            <Label.FormattedText>
                                                                                <FormattedString>
                                                                                    <Span Text="{Binding RequestTravelAgencyVisa.PersonCount,StringFormat='{0} pax'}" TextColor="Gray" FontSize="12"></Span>
                                                                                </FormattedString>
                                                                            </Label.FormattedText>
                                                                        </Label>-->


                                                                        <Label Text="{Binding RequestTravelAgencyVisa.PersonCount,StringFormat='{0} pax'}" TextColor="Gray" FontSize="12" VerticalTextAlignment="Center" FontAutoScalingEnabled="False">
                                                                            <Label.Triggers>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=Lang}" Value="ar">
                                                                                    <Setter Property="Text" Value="{Binding RequestTravelAgencyVisa.PersonCount,StringFormat='{0} شخص'}"></Setter>
                                                                                </DataTrigger>
                                                                            </Label.Triggers>
                                                                        </Label>

                                                                        <Label Text="{Binding Total,StringFormat='SAR {0}'}" TextColor="DeepSkyBlue"
                                                                           VerticalOptions="EndAndExpand" FontSize="11">
                                                                            <Label.Triggers>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Total}" Value="0">
                                                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                                                </DataTrigger>
                                                                                <DataTrigger TargetType="Label" Binding="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=Lang}" Value="ar">
                                                                                    <Setter Property="Text" Value="{Binding Total,StringFormat='{0} رس'}"></Setter>
                                                                                </DataTrigger>
                                                                            </Label.Triggers>
                                                                        </Label>
                                                                        <StackLayout.GestureRecognizers>
                                                                            <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_RequestDetailsViewModel}}, Path=SelectVisaCommand}" CommandParameter="{Binding}"></TapGestureRecognizer>
                                                                        </StackLayout.GestureRecognizers>
                                                                    </StackLayout>
                                                                </ScrollView>
                                                            </Grid>
                                                            <Border.Triggers>
                                                                <DataTrigger TargetType="Border" Binding="{Binding AcceptPriceDis}" Value="True">
                                                                    <Setter Property="Stroke" Value="Green"></Setter>
                                                                    <Setter Property="StrokeThickness" Value="2"></Setter>
                                                                </DataTrigger>
                                                                <DataTrigger TargetType="Border" Binding="{Binding AcceptAgen}" Value="True">
                                                                    <Setter Property="Stroke" Value="DodgerBlue"></Setter>
                                                                    <Setter Property="StrokeThickness" Value="2"></Setter>
                                                                </DataTrigger>
                                                            </Border.Triggers>
                                                        </Border>
                                                    </DataTemplate>
                                                </CollectionView.ItemTemplate>
                                            </CollectionView>
                                        </Border>
                                    </StackLayout>
                                </ScrollView>
                                <Button VerticalOptions="End" Text="{Static res:AppResources.btnApply_Forgot}" FontSize="16" FontAttributes="Bold" BackgroundColor="#2fa562" TextColor="White" Margin="20,0,20,20"
                                        Command="{Binding AddToRequestCommand}" IsVisible="False">
                                    <Button.Triggers>
                                        <!--<DataTrigger TargetType="Button" Binding="{Binding IsRequestHistory}" Value="False">
                                            <Setter Property="IsVisible" Value="True"></Setter>
                                        </DataTrigger>
                                        <DataTrigger TargetType="Button" Binding="{Binding Response.TotalPayment}" Value="0">
                                            <Setter Property="IsVisible" Value="True"></Setter>
                                        </DataTrigger>-->

                                        <MultiTrigger TargetType="Button">
                                            <MultiTrigger.Conditions>
                                                <BindingCondition Binding="{Binding IsRequestHistory}" Value="False" />
                                                <BindingCondition Binding="{Binding Response.TotalPayment}" Value="0" />
                                            </MultiTrigger.Conditions>
                                            <Setter Property="IsVisible" Value="True" />
                                        </MultiTrigger>
                                    </Button.Triggers>
                                </Button>
                            </StackLayout>
                            <ContentView.Triggers>
                                <DataTrigger TargetType="ContentView" Binding="{Binding Lang}" Value="ar">
                                    <Setter Property="FlowDirection" Value="RightToLeft"></Setter>
                                </DataTrigger>
                            </ContentView.Triggers>
                        </ContentView>
                    </tabView:SfTabItem.Content>
                </tabView:SfTabItem>
                <!--Paymment-->
                <tabView:SfTabItem Header="{Static res:AppResources.BtnPayments_DisPayment}" FontSize="14" BackgroundColor="#f6fcf2" FontFamily="Almarai-Regular">
                    <tabView:SfTabItem.Content>
                        <ContentView x:Name="PaymmentView">
                            <StackLayout Orientation="Vertical" Margin="20" Spacing="20">
                                <StackLayout Orientation="Horizontal">
                                    <Image VerticalOptions="CenterAndExpand">
                                        <Image.Source>
                                            <FontImageSource Glyph="" FontFamily="FontIconSolid" Color="Gray" Size="25"></FontImageSource>
                                        </Image.Source>
                                        <Image.Triggers>
                                            <DataTrigger TargetType="Image" Binding="{Binding Lang}" Value="ar">
                                                <Setter Property="Rotation" Value="180"></Setter>
                                            </DataTrigger>
                                        </Image.Triggers>
                                        <Image.GestureRecognizers>
                                            <TapGestureRecognizer Command="{Binding BackButtonClickedCommand}"></TapGestureRecognizer>
                                        </Image.GestureRecognizers>
                                    </Image>
                                    <Label Text="{Static res:AppResources.btnPayNow_NewRequest}" FontAutoScalingEnabled="False" FontSize="18" FontAttributes="Bold" HorizontalOptions="CenterAndExpand"
                                             TextColor="Black" VerticalOptions="CenterAndExpand" ></Label>
                                    <StackLayout.Triggers>
                                        <DataTrigger TargetType="StackLayout" Binding="{Binding Lang}" Value="ar">
                                            <Setter Property="FlowDirection" Value="RightToLeft"></Setter>
                                        </DataTrigger>
                                    </StackLayout.Triggers>
                                </StackLayout>
                                <Border StrokeShape="RoundRectangle 20" HeightRequest="150" BackgroundColor="#1c874b" StrokeThickness="0">
                                    <StackLayout Orientation="Vertical" HorizontalOptions="FillAndExpand">

                                        <StackLayout HorizontalOptions="StartAndExpand" Padding="20,20,20,0" Spacing="0">
                                            <Label Text="{Static res:AppResources.Pending_Transactions}" FontSize="12" TextColor="White"></Label>
                                            <StackLayout Orientation="Horizontal" HorizontalOptions="CenterAndExpand" Spacing="3">
                                                <Label Text="{Binding PaymentNotActive}" FontSize="12" TextColor="Yellow"></Label>
                                                <Label Text="{Static res:AppResources.SAR}" FontSize="11" FontAttributes="Bold" TextColor="Yellow" VerticalTextAlignment="End" TranslationY="0"></Label>
                                            </StackLayout>
                                       
                                            <StackLayout.Triggers>
                                                <DataTrigger TargetType="StackLayout" Binding="{Binding PaymentNotActive}" Value="0">
                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                </DataTrigger>
                                                <DataTrigger TargetType="StackLayout" Binding="{Binding IsPaymentNotActive}" Value="False">
                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                </DataTrigger>
                                            </StackLayout.Triggers>
                                        </StackLayout>


                                        <StackLayout Orientation="Horizontal" VerticalOptions="CenterAndExpand" Spacing="5" HorizontalOptions="CenterAndExpand">
                                            <Label Text="{Binding OutStandingprice}" FontSize="32" TextColor="White"></Label>
                                            <Label Text="{Static res:AppResources.SAR}" FontSize="16" TextColor="White" VerticalTextAlignment="End" TranslationY="0"></Label>
                                        </StackLayout>
                                        <Label Text="{Static res:AppResources.OSBlance_payment}" TextColor="White" Padding="20,0,20,0" FontSize="18" HorizontalOptions="EndAndExpand"></Label>
                                    </StackLayout>

                                    <Border.Triggers>
                                        <DataTrigger TargetType="Border" Binding="{Binding Lang}" Value="ar">
                                            <Setter Property="FlowDirection" Value="RightToLeft"></Setter>
                                        </DataTrigger>
                                    </Border.Triggers>
                                </Border>
                                <HorizontalStackLayout>
                                    <CheckBox x:Name="FBCheck" Color="#1c874b" CheckedChanged="FBCheck_CheckedChanged_1" IsChecked="{Binding IsAllPyment}">
                                    </CheckBox>
                                    <Label Text="{Static res:AppResources.FullPayment_payment}" TextColor="Black" VerticalTextAlignment="Center" FontSize="14" FontAttributes="Bold"
                                           ></Label>
                                    <Entry x:Name="AmmountEntry" Text="{Binding CustomPrice}" Keyboard="Numeric" FontSize="14" TextColor="Black" HorizontalOptions="FillAndExpand"
                                           Placeholder="{Static res:AppResources.Please_Enter_ammount}" Margin="15,0,0,0" TextChanged="AmmountEntry_TextChanged">
                                        <Entry.Triggers>
                                            <DataTrigger TargetType="Entry" Binding="{Binding Source={x:Reference FBCheck},Path=IsChecked}" Value="True">
                                                <Setter Property="IsVisible" Value="False"></Setter>
                                            </DataTrigger>
                                            <DataTrigger TargetType="Entry" Binding="{Binding Lang}" Value="ar">
                                                <Setter Property="Placeholder" Value="{Static res:AppResources.Please_Enter_ammount}"></Setter>
                                            </DataTrigger>
                                        </Entry.Triggers>
                                    </Entry>
                                </HorizontalStackLayout>
                                <Grid VerticalOptions="FillAndExpand">
                                    <CollectionView ItemsSource="{Binding Payments}" VerticalOptions="FillAndExpand" VerticalScrollBarVisibility="Never" Margin="0,0,0,60">
                                        <CollectionView.ItemTemplate>
                                            <DataTemplate>
                                                <Border StrokeShape="RoundRectangle 20" Padding="15,0,15,0" HeightRequest="50">
                                                    <StackLayout Orientation="Horizontal" Spacing="15">
                                                        <Image VerticalOptions="CenterAndExpand">
                                                            <Image.Source>
                                                                <FontImageSource Glyph="" FontFamily="FontIconSolid" Color="Black" Size="25"></FontImageSource>
                                                            </Image.Source>
                                                        </Image>
                                                        
                                                        <Label Text="{Binding CreatedDate, StringFormat='{0:MM-dd-yyyy}'}" TextColor="Black" VerticalTextAlignment="Center" FontSize="14"></Label>

                                                        
                                                        <Image Source="{Binding UrlImgNameVM}" WidthRequest="50" Aspect="AspectFit" >
                                                            <Image.GestureRecognizers>
                                                                <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_PaymentViewModel}}, Path=OpenFullScreenImageCommand}" CommandParameter="{Binding}"></TapGestureRecognizer>
                                                            </Image.GestureRecognizers>
                                                            <Image.Triggers>
                                                                <DataTrigger TargetType="Image" Binding="{Binding UrlImgNameVM}" Value="https://api.tripsbliss.com/">
                                                                    <Setter Property="IsVisible" Value="False"></Setter>
                                                                </DataTrigger>
                                                            </Image.Triggers>
                                                        </Image>
                                                        
                                                        <Label Text="{Binding AmountPayment}" TextColor="Green" VerticalTextAlignment="Center" FontSize="14" HorizontalOptions="EndAndExpand"></Label>
                                                        
                                                        <CheckBox x:Name="chekActive" Color="Green" IsChecked="{Binding Active}">
                                                            <CheckBox.Triggers>
                                                                <MultiTrigger TargetType="CheckBox">
                                                                    <MultiTrigger.Conditions>
                                                                        <BindingCondition Binding="{Binding PaymentMethod}" Value="3" />
                                                                        <BindingCondition Binding="{Binding Active}" Value="False" />
                                                                    </MultiTrigger.Conditions>
                                                                    <Setter Property="IsChecked" Value="False" />
                                                                </MultiTrigger>
                                                                <DataTrigger TargetType="CheckBox" Binding="{Binding PaymentMethod}" Value="1">
                                                                    <Setter Property="IsVisible" Value="False" />
                                                                </DataTrigger>
                                                                <DataTrigger TargetType="CheckBox" Binding="{Binding PaymentMethod}" Value="2">
                                                                    <Setter Property="IsVisible" Value="False" />
                                                                </DataTrigger>
                                                                <DataTrigger TargetType="CheckBox" Binding="{Binding Source={x:Reference chekActive},Path=IsChecked}" Value="True">
                                                                    <Setter Property="IsEnabled" Value="False" />
                                                                </DataTrigger>
                                                            </CheckBox.Triggers>
                                                            <CheckBox.GestureRecognizers>
                                                                <TapGestureRecognizer Command="{Binding Source={RelativeSource AncestorType={x:Type vm:Dis_D_PaymentViewModel}}, Path=IsActivePayBankCommand}" CommandParameter="{Binding}"></TapGestureRecognizer>
                                                            </CheckBox.GestureRecognizers>
                                                        </CheckBox>
                                                    </StackLayout>

                                                </Border>
                                            </DataTemplate>
                                        </CollectionView.ItemTemplate>
                                        <CollectionView.ItemsLayout>
                                            <GridItemsLayout VerticalItemSpacing="10" Orientation="Vertical"></GridItemsLayout>
                                        </CollectionView.ItemsLayout>
                                    </CollectionView>
                                    <Button Text="{Static res:AppResources.BtnCashConfirm_DisPayment}" BackgroundColor="#1c874b" FontSize="16" TextColor="White" FontAttributes="Bold"
                                            Command="{Binding AddPaymentCommand}" VerticalOptions="End">
                                        <Button.Triggers>
                                            <DataTrigger TargetType="Button" Binding="{Binding IsPayAndAmounTrue}" Value="False">
                                                <Setter Property="IsEnabled" Value="False"></Setter>
                                            </DataTrigger>
                                        </Button.Triggers>
                                    </Button>
                                </Grid>
                            </StackLayout>
                        </ContentView>
                    </tabView:SfTabItem.Content>
                </tabView:SfTabItem>
            </tabView:SfTabView.Items>
        </tabView:SfTabView>
    </StackLayout>
</Controls:CustomControl>